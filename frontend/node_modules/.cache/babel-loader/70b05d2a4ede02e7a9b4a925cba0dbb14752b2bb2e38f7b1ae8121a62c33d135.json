{"ast":null,"code":"import axios from'axios';const API_URL=process.env.REACT_APP_API_URL||'http://localhost:3000/api/v1';const api=axios.create({baseURL:API_URL,headers:{'Content-Type':'application/json',Accept:'application/json'}});// Attach token from localStorage to every request\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;});// On responses, if the API returns a new token in `authorization` header, store it\napi.interceptors.response.use(response=>{const authHeader=response.headers['authorization']||response.headers['Authorization'];if(authHeader){// support `Bearer <token>` or raw token\nconst token=authHeader.startsWith('Bearer ')?authHeader.split(' ')[1]:authHeader;if(token)localStorage.setItem('token',token);}return response;},error=>{// Optionally handle global errors (401 -> remove token)\nif(error.response&&error.response.status===401){localStorage.removeItem('token');}return Promise.reject(error);});export default api;","map":{"version":3,"names":["axios","API_URL","process","env","REACT_APP_API_URL","api","create","baseURL","headers","Accept","interceptors","request","use","config","token","localStorage","getItem","Authorization","concat","response","authHeader","startsWith","split","setItem","error","status","removeItem","Promise","reject"],"sources":["/home/saad/APIsPra/BizmindClone/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios'\n\nconst API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000/api/v1'\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    Accept: 'application/json'\n  }\n})\n\n// Attach token from localStorage to every request\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token')\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`\n  }\n  return config\n})\n\n// On responses, if the API returns a new token in `authorization` header, store it\napi.interceptors.response.use(\n  response => {\n    const authHeader = response.headers['authorization'] || response.headers['Authorization']\n    if (authHeader) {\n      // support `Bearer <token>` or raw token\n      const token = authHeader.startsWith('Bearer ') ? authHeader.split(' ')[1] : authHeader\n      if (token) localStorage.setItem('token', token)\n    }\n    return response\n  },\n  error => {\n    // Optionally handle global errors (401 -> remove token)\n    if (error.response && error.response.status === 401) {\n      localStorage.removeItem('token')\n    }\n    return Promise.reject(error)\n  }\n)\n\nexport default api\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB,KAAM,CAAAC,OAAO,CAAGC,OAAO,CAACC,GAAG,CAACC,iBAAiB,EAAI,8BAA8B,CAE/E,KAAM,CAAAC,GAAG,CAAGL,KAAK,CAACM,MAAM,CAAC,CACvBC,OAAO,CAAEN,OAAO,CAChBO,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClCC,MAAM,CAAE,kBACV,CACF,CAAC,CAAC,CAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,EAAI,CACrC,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACTD,MAAM,CAACL,OAAO,CAACS,aAAa,WAAAC,MAAA,CAAaJ,KAAK,CAAE,CAClD,CACA,MAAO,CAAAD,MAAM,CACf,CAAC,CAAC,CAEF;AACAR,GAAG,CAACK,YAAY,CAACS,QAAQ,CAACP,GAAG,CAC3BO,QAAQ,EAAI,CACV,KAAM,CAAAC,UAAU,CAAGD,QAAQ,CAACX,OAAO,CAAC,eAAe,CAAC,EAAIW,QAAQ,CAACX,OAAO,CAAC,eAAe,CAAC,CACzF,GAAIY,UAAU,CAAE,CACd;AACA,KAAM,CAAAN,KAAK,CAAGM,UAAU,CAACC,UAAU,CAAC,SAAS,CAAC,CAAGD,UAAU,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAGF,UAAU,CACtF,GAAIN,KAAK,CAAEC,YAAY,CAACQ,OAAO,CAAC,OAAO,CAAET,KAAK,CAAC,CACjD,CACA,MAAO,CAAAK,QAAQ,CACjB,CAAC,CACDK,KAAK,EAAI,CACP;AACA,GAAIA,KAAK,CAACL,QAAQ,EAAIK,KAAK,CAACL,QAAQ,CAACM,MAAM,GAAK,GAAG,CAAE,CACnDV,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC,CAClC,CACA,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACJ,KAAK,CAAC,CAC9B,CACF,CAAC,CAED,cAAe,CAAAnB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}